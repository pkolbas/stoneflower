import type { PlantPersonality, MessageType } from '@prisma/client';

interface MessageTemplates {
  [key: string]: string[];
}

const PERSONALITY_TEMPLATES: Record<PlantPersonality, {
  wateringReminder: MessageTemplates;
  wateringThanks: string[];
  greeting: string[];
  milestone: string[];
  sos: string[];
}> = {
  FRIENDLY: {
    wateringReminder: {
      ok: [
        '–ü—Ä–∏–≤–µ—Ç! –ü–æ–∫–∞ –≤—Å—ë –æ—Ç–ª–∏—á–Ω–æ, –Ω–æ —Å–∫–æ—Ä–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–æ–¥–∏—á–∫–∞ üíß',
        '–£ –º–µ–Ω—è –≤—Å—ë —Ö–æ—Ä–æ—à–æ! –ü–æ–ª–∏–≤ —á–µ—Ä–µ–∑ –ø–∞—Ä—É –¥–Ω–µ–π üåø',
      ],
      soon: [
        '–ü—Ä–∏–≤–µ—Ç! –°–µ–≥–æ–¥–Ω—è –±—ã –Ω–µ –ø–æ–º–µ—à–∞–ª –ø–æ–ª–∏–≤ üíß',
        '–≠–π, –Ω–µ –∑–∞–±—É–¥—å –ø—Ä–æ –º–µ–Ω—è! –ü–æ—á–≤–∞ –ø–æ–¥—Å—ã—Ö–∞–µ—Ç üå±',
        '–ë—ã–ª–æ –±—ã –∑–¥–æ—Ä–æ–≤–æ –ø–æ–ª—É—á–∏—Ç—å –Ω–µ–º–Ω–æ–≥–æ –≤–æ–¥—ã —Å–µ–≥–æ–¥–Ω—è! üí¶',
      ],
      overdue: [
        '–≠–π, —Ç—ã –ø—Ä–æ –º–µ–Ω—è –∑–∞–±—ã–ª? –û—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è –ø–∏—Ç—å üò¢',
        '–ó–µ–º–ª—è —Å–æ–≤—Å–µ–º —Å—É—Ö–∞—è... –ü–æ–ª–µ–π –º–µ–Ω—è, –ø–æ–∂–∞–ª—É–π—Å—Ç–∞! ü•∫',
        '–ß—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –∫–∞–∫ –≤ –ø—É—Å—Ç—ã–Ω–µ... –í–æ–¥–∏—á–∫–∏ –±—ã! üèúÔ∏è',
      ],
      critical: [
        'SOS! –ú–Ω–µ —Å—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–∞ –ø–æ–º–æ—â—å! üÜò',
        '–≠–∫—Å—Ç—Ä–µ–Ω–Ω–∞—è —Å–∏—Ç—É–∞—Ü–∏—è! –ü–æ–ª–µ–π –º–µ–Ω—è –Ω–µ–º–µ–¥–ª–µ–Ω–Ω–æ! üò∞',
        '–Ø –≤ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–º —Å–æ—Å—Ç–æ—è–Ω–∏–∏... –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, —Å–ø–∞—Å–∏ –º–µ–Ω—è! üíÄ',
      ],
    },
    wateringThanks: [
      '–°–ø–∞—Å–∏–±–æ –∑–∞ –∑–∞–±–æ—Ç—É! –ß—É–≤—Å—Ç–≤—É—é —Å–µ–±—è –æ—Ç–ª–∏—á–Ω–æ! üå±‚ú®',
      '–ú–º–º, –∫–∞–∫ —Ö–æ—Ä–æ—à–æ! –°–ø–∞—Å–∏–±–æ –∑–∞ –≤–æ–¥–∏—á–∫—É! üíö',
      '–í–æ—Ç —ç—Ç–æ –¥–∞! –¢–µ–ø–µ—Ä—å –º–æ–≥—É —Ä–∞—Å—Ç–∏ –¥–∞–ª—å—à–µ! üåø',
    ],
    greeting: [
      '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ! –ö–∞–∫ –¥–µ–ª–∞? üåû',
      '–†–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å! üëã',
      '–ü—Ä–∏–≤–µ—Ç! –û—Ç–ª–∏—á–Ω—ã–π –¥–µ–Ω—å –¥–ª—è —Ä–æ—Å—Ç–∞! üå±',
    ],
    milestone: [
      '–£—Ä–∞! –ú–Ω–µ —Å–µ–≥–æ–¥–Ω—è –∏—Å–ø–æ–ª–Ω–∏–ª—Å—è –º–µ—Å—è—Ü —É —Ç–µ–±—è! üéÇ',
      '–í–∞—É, —è –≤—ã—Ä–æ—Å –Ω–∞ 5 —Å–º –∑–∞ —ç—Ç–æ—Ç –º–µ—Å—è—Ü! üìè',
      '–°–º–æ—Ç—Ä–∏, —É –º–µ–Ω—è –Ω–æ–≤—ã–π –ª–∏—Å—Ç–æ—á–µ–∫! üåø‚ú®',
    ],
    sos: [
      '–°—Ä–æ—á–Ω–æ! –ú–Ω–µ –Ω—É–∂–Ω–∞ —Ç–≤–æ—è –ø–æ–º–æ—â—å! üÜò',
      '–£ –º–µ–Ω—è –ø—Ä–æ–±–ª–µ–º—ã! –ü–æ—Å–º–æ—Ç—Ä–∏ –Ω–∞ –º–µ–Ω—è! üò∞',
    ],
  },
  SHY: {
    wateringReminder: {
      ok: [
        '...–≤—Å—ë —Ö–æ—Ä–æ—à–æ... üå±',
        '–ü–æ–∫–∞ —Å–ø—Ä–∞–≤–ª—è—é—Å—å... –Ω–µ –±–µ—Å–ø–æ–∫–æ–π—Å—è...',
      ],
      soon: [
        '...–∏–∑–≤–∏–Ω–∏, —á—Ç–æ –±–µ—Å–ø–æ–∫–æ—é... –Ω–æ –º–Ω–µ –±—ã –≤–æ–¥–∏—á–∫–∏... üíß',
        '–ï—Å–ª–∏ —Ç–µ–±–µ –Ω–µ —Å–ª–æ–∂–Ω–æ... –º–æ–∂–Ω–æ –ø–æ–ª–∏–≤?.. ü•∫',
        '...–ø–æ—á–≤–∞ –Ω–µ–º–Ω–æ–≥–æ —Å—É—Ö–∞—è...',
      ],
      overdue: [
        '...–ø—Ä–æ—Å—Ç–∏, —á—Ç–æ –Ω–∞–ø–æ–º–∏–Ω–∞—é... –Ω–æ –æ—á–µ–Ω—å —Ö–æ—á–µ—Ç—Å—è –ø–∏—Ç—å... üò¢',
        '...–º–Ω–µ –Ω–µ–ª–æ–≤–∫–æ –ø—Ä–æ—Å–∏—Ç—å, –Ω–æ... –ø–æ–∂–∞–ª—É–π—Å—Ç–∞... üíß',
      ],
      critical: [
        '...–ø–æ–º–æ–≥–∏... –ø–æ–∂–∞–ª—É–π—Å—Ç–∞... üÜò',
        '...–º–Ω–µ –æ—á–µ–Ω—å –ø–ª–æ—Ö–æ... üò∞',
      ],
    },
    wateringThanks: [
      '...—Å–ø–∞—Å–∏–±–æ... üíö',
      '...–æ—á–µ–Ω—å –ø—Ä–∏—è—Ç–Ω–æ... üå±',
    ],
    greeting: [
      '...–ø—Ä–∏–≤–µ—Ç... üëã',
      '...—Ä–∞–¥ —Ç–µ–±—è –≤–∏–¥–µ—Ç—å...',
    ],
    milestone: [
      '...–∫–∞–∂–µ—Ç—Å—è, —è –Ω–µ–º–Ω–æ–≥–æ –ø–æ–¥—Ä–æ—Å... üå±',
      '...—É –º–µ–Ω—è –Ω–æ–≤—ã–π –ª–∏—Å—Ç–∏–∫... –Ω–µ –∑–Ω–∞—é, –∑–∞–º–µ—Ç–∏–ª –ª–∏ —Ç—ã...',
    ],
    sos: [
      '...–ø–æ–º–æ–≥–∏... üÜò',
    ],
  },
  DRAMATIC: {
    wateringReminder: {
      ok: [
        '–ê—Ö, –∫–∞–∫–æ–π –ø—Ä–µ–∫—Ä–∞—Å–Ω—ã–π –¥–µ–Ω—å! –Ø —Å–∏—è—é! ‚ú®',
        '–ñ–∏–∑–Ω—å –ø—Ä–µ–∫—Ä–∞—Å–Ω–∞! –ù–æ —Å–∫–æ—Ä–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è –≤–æ–¥–∞... üé≠',
      ],
      soon: [
        '–û –±–æ–∂–µ! –Ø —á—É–≤—Å—Ç–≤—É—é, –∫–∞–∫ –∂–∏–∑–Ω—å –ø–æ–∫–∏–¥–∞–µ—Ç –º–µ–Ω—è! –ù—É–∂–µ–Ω –ø–æ–ª–∏–≤! üíß',
        '–î—Ä–∞–º–∞! –¢—Ä–∞–≥–µ–¥–∏—è! –ü–æ—á–≤–∞ —Å–æ—Ö–Ω–µ—Ç! üé≠',
        '–≠—Ç–æ –∫–æ–Ω–µ—Ü?! –ù–µ—Ç, –ø–æ–¥–æ–∂–¥–∏... –ø—Ä–æ—Å—Ç–æ –Ω—É–∂–Ω–∞ –≤–æ–¥–∞! üí¶',
      ],
      overdue: [
        '–Ø –£–ú–ò–†–ê–Æ! –≠—Ç–æ –∫–æ–Ω–µ—Ü! –ó–∞—Å—É—Ö–∞! –ö–∞—Ç–∞—Å—Ç—Ä–æ—Ñ–∞! üò±',
        '–ü–æ—á–µ–º—É?! –ü–û–ß–ï–ú–£ —Ç—ã –∑–∞–±—ã–ª –æ–±–æ –º–Ω–µ?! üíî',
        '–ú–∏—Ä –∂–µ—Å—Ç–æ–∫! –Ø –∑–∞—Å—ã—Ö–∞—é –±–µ–∑ —Ç–≤–æ–µ–π –ª—é–±–≤–∏! ü•Ä',
      ],
      critical: [
        '–ü–†–û–©–ê–ô, –ñ–ï–°–¢–û–ö–ò–ô –ú–ò–†! –•–æ—Ç—è... –µ—â—ë –º–æ–∂–Ω–æ —Å–ø–∞—Å—Ç–∏! üÜò',
        '–≠–¢–û –ê–ü–û–ö–ê–õ–ò–ü–°–ò–°!!! –°–†–û–ß–ù–û –í–û–î–ê!!! üíÄüî•',
      ],
    },
    wateringThanks: [
      '–û, –°–ü–ê–°–ò–ë–û! –¢—ã —Å–ø–∞—Å –º–Ω–µ –∂–∏–∑–Ω—å! –Ø –õ–Æ–ë–õ–Æ —Ç–µ–±—è! üíö‚ú®',
      '–ù–ï–í–ï–†–û–Ø–¢–ù–û! –Ø –≤–æ–∑—Ä–æ–∂–¥–∞—é—Å—å –∫–∞–∫ —Ñ–µ–Ω–∏–∫—Å! üî•üå±',
    ],
    greeting: [
      '–û, –º–æ–π –ª—é–±–∏–º—ã–π —Ö–æ–∑—è–∏–Ω –ø—Ä–∏—à—ë–ª! üé≠‚ú®',
      '–ù–ê–ö–û–ù–ï–¶-–¢–û! –Ø —Ç–∞–∫ —Å–∫—É—á–∞–ª! üíï',
    ],
    milestone: [
      '–°–ú–û–¢–†–ò! –°–ú–û–¢–†–ò! –ù–æ–≤—ã–π –ª–∏—Å—Ç–æ–∫! –≠—Ç–æ –ß–£–î–û! üåø‚ú®',
      '–Ø –í–´–†–û–°! –°–∫–æ—Ä–æ —Å—Ç–∞–Ω—É –ì–ò–ì–ê–ù–¢–û–ú! üå≥',
    ],
    sos: [
      '–ö–ê–¢–ê–°–¢–†–û–§–ê!!! –ê–ü–û–ö–ê–õ–ò–ü–°–ò–°!!! –°–ü–ê–°–ò –ú–ï–ù–Ø!!! üÜòüî•',
    ],
  },
  WISE: {
    wateringReminder: {
      ok: [
        '–í—Å—ë —Ç–µ—á—ë—Ç, –≤—Å—ë –º–µ–Ω—è–µ—Ç—Å—è. –ü–æ–∫–∞ –º–Ω–µ —Ö–≤–∞—Ç–∞–µ—Ç –≤–ª–∞–≥–∏. üßò',
        '–í –≥–∞—Ä–º–æ–Ω–∏–∏ —Å –ø—Ä–∏—Ä–æ–¥–æ–π. –ü–æ–ª–∏–≤ —Å–∫–æ—Ä–æ –ø–æ–Ω–∞–¥–æ–±–∏—Ç—Å—è. üåø',
      ],
      soon: [
        '–ö–∞–∫ –≥–æ–≤–æ—Ä–∏–ª –ö–æ–Ω—Ñ—É—Ü–∏–π: –≤–æ–¥–∞ ‚Äî –∏—Å—Ç–æ—á–Ω–∏–∫ –∂–∏–∑–Ω–∏. –ü–æ—Ä–∞ –±—ã –ø–æ–ª–∏—Ç—å. üíß',
        '–ú—É–¥—Ä–æ—Å—Ç—å –ø–æ–¥—Å–∫–∞–∑—ã–≤–∞–µ—Ç: –Ω–∞—Å—Ç–∞–ª–æ –≤—Ä–µ–º—è –ø–æ–ª–∏–≤–∞. üßò',
        '–ó–µ–º–ª—è –ø—Ä–æ—Å–∏—Ç –≤–æ–¥—ã. –ü—Ä–∏—Å–ª—É—à–∞–π—Å—è –∫ –Ω–µ–π. üåç',
      ],
      overdue: [
        '–¢–µ—Ä–ø–µ–Ω–∏–µ ‚Äî –¥–æ–±—Ä–æ–¥–µ—Ç–µ–ª—å, –Ω–æ –≤–æ–¥–∞ –Ω—É–∂–Ω–∞ —Å–µ–π—á–∞—Å. üòå',
        '–î–∞–∂–µ –º—É–¥—Ä–µ—Ü –Ω–µ –≤—ã–∂–∏–≤–µ—Ç –±–µ–∑ –≤–æ–¥—ã. –ü–æ–º–æ–≥–∏ –º–Ω–µ. üôè',
      ],
      critical: [
        '–ñ–∏–∑–Ω—å –≤–∏—Å–∏—Ç –Ω–∞ –≤–æ–ª–æ—Å–∫–µ. –î–µ–π—Å—Ç–≤—É–π. üÜò',
        '–°–µ–π—á–∞—Å –Ω–µ –≤—Ä–µ–º—è –¥–ª—è –º–µ–¥–∏—Ç–∞—Ü–∏–∏. –°—Ä–æ—á–Ω–æ –Ω—É–∂–Ω–∞ –≤–æ–¥–∞. üíÄ',
      ],
    },
    wateringThanks: [
      '–ë–ª–∞–≥–æ–¥–∞—Ä—é. –¢—ã –ø–æ–Ω–∏–º–∞–µ—à—å –∑–∞–∫–æ–Ω—ã –ø—Ä–∏—Ä–æ–¥—ã. üôè',
      '–í–æ–¥–∞ ‚Äî —ç—Ç–æ –∂–∏–∑–Ω—å. –°–ø–∞—Å–∏–±–æ –∑–∞ –º—É–¥—Ä–æ—Å—Ç—å. üíö',
    ],
    greeting: [
      '–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é —Ç–µ–±—è, —é–Ω—ã–π —Å–∞–¥–æ–≤–æ–¥. üßò',
      '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å. –°–µ–≥–æ–¥–Ω—è —Ö–æ—Ä–æ—à–∏–π –¥–µ–Ω—å –¥–ª—è —Ä–æ—Å—Ç–∞. üå±',
    ],
    milestone: [
      '–í—Ä–µ–º—è –∏–¥—ë—Ç. –Ø —Ä–∞—Å—Ç—É. –¢–∞–∫–æ–≤–∞ –ø—Ä–∏—Ä–æ–¥–∞ –≤–µ—â–µ–π. üåø',
      '–ï—â—ë –æ–¥–∏–Ω –∫—Ä—É–≥ –∑–∞–≤–µ—Ä—à—ë–Ω. –ë–ª–∞–≥–æ–¥–∞—Ä—é –∑–∞ –∑–∞–±–æ—Ç—É. üôè',
    ],
    sos: [
      '–î–∞–∂–µ –º—É–¥—Ä–µ—Ü –≤–∑—ã–≤–∞–µ—Ç –æ –ø–æ–º–æ—â–∏. –°—Ä–æ—á–Ω–æ. üÜò',
    ],
  },
  PLAYFUL: {
    wateringReminder: {
      ok: [
        '–õ—è-–ª—è-–ª—è! –í—Å—ë —Å—É–ø–µ—Ä! üéµ',
        '–¢–∞–Ω—Ü—É—é –ø–æ–¥ —Å–æ–ª–Ω—ã—à–∫–æ–º! –°–∫–æ—Ä–æ –∑–∞—Ö–æ—á—É –ø–∏—Ç—å! üíÉ',
      ],
      soon: [
        '–ë—É–ª—å-–±—É–ª—å! –•–æ—á—É –≤–æ–¥–∏—á–∫–∏! üíßüéâ',
        '–≠–π, –¥–∞–≤–∞–π –ø–æ–∏–≥—Ä–∞–µ–º –≤ "–ø–æ–ª–µ–π —Ä–∞—Å—Ç–µ–Ω–∏–µ"! –Ø –ø–µ—Ä–≤—ã–π! üéÆ',
        '–®—à—à... —Å–ª—ã—à–∏—à—å? –≠—Ç–æ –º–æ—è –ø–æ—á–≤–∞ —à–µ–ø—á–µ—Ç: "–í–æ–¥—ã!" üé≠',
      ],
      overdue: [
        '–≠—ç—ç... —ç—Ç–æ –Ω–µ —Å–º–µ—à–Ω–æ —É–∂–µ! –ì–¥–µ –≤–æ–¥–∞?! üò§',
        '–ò–≥—Ä–∞ –æ–∫–æ–Ω—á–µ–Ω–∞! –ú–Ω–µ —Ä–µ–∞–ª—å–Ω–æ –Ω—É–∂–µ–Ω –ø–æ–ª–∏–≤! üéÆ‚ùå',
      ],
      critical: [
        '–ù–ï –í–ï–°–ï–õ–û! –°–û–í–°–ï–ú –ù–ï –í–ï–°–ï–õ–û! –í–û–î–´! üÜò',
        '–≠—Ç–æ –Ω–µ –∏–≥—Ä–∞! SOS! üíÄ',
      ],
    },
    wateringThanks: [
      '–£–†–ê! –í–µ—á–µ—Ä–∏–Ω–∫–∞ —Å –≤–æ–¥–æ–π! üéâüí¶',
      '–í–∏–∏–∏–∏! –°–ø–∞—Å–∏–±–æ-—Å–ø–∞—Å–∏–±–æ-—Å–ø–∞—Å–∏–±–æ! üíöüéä',
    ],
    greeting: [
      '–ü—Ä–∏–≤–µ–µ–µ—Ç! –î–∞–≤–∞–π –≤–µ—Å–µ–ª–∏—Ç—å—Å—è! üéâ',
      '–û, —Ç—ã –ø—Ä–∏—à—ë–ª! –ü–æ–∏–≥—Ä–∞–µ–º? üéÆ',
    ],
    milestone: [
      '–°–º–æ—Ç—Ä–∏-—Å–º–æ—Ç—Ä–∏! –ù–æ–≤—ã–π –ª–∏—Å—Ç–∏–∫! –ô—É—Ö—É—É—É! üéâüåø',
      '–Ø —Ä–∞—Å—Ç—É! –°–∫–æ—Ä–æ –±—É–¥—É –±–æ–ª—å—à–æ–π! –í–ê–£! üöÄ',
    ],
    sos: [
      '–≠–¢–û –ù–ï –®–£–¢–ö–ê! –ü–û–ú–û–ì–ò! üÜòüé≠',
    ],
  },
};

export function generatePlantMessage(
  personality: PlantPersonality,
  messageType: MessageType,
  status?: 'ok' | 'soon' | 'overdue' | 'critical'
): string {
  const templates = PERSONALITY_TEMPLATES[personality];

  switch (messageType) {
    case 'WATERING_REMINDER':
      const reminderStatus = status || 'soon';
      const messages = templates.wateringReminder[reminderStatus];
      return messages[Math.floor(Math.random() * messages.length)];

    case 'WATERING_THANKS':
      return templates.wateringThanks[Math.floor(Math.random() * templates.wateringThanks.length)];

    case 'GREETING':
      return templates.greeting[Math.floor(Math.random() * templates.greeting.length)];

    case 'MILESTONE':
      return templates.milestone[Math.floor(Math.random() * templates.milestone.length)];

    case 'SOS':
      return templates.sos[Math.floor(Math.random() * templates.sos.length)];

    default:
      return templates.greeting[0];
  }
}

export function getPersonalityEmoji(personality: PlantPersonality): string {
  switch (personality) {
    case 'FRIENDLY': return 'üòä';
    case 'SHY': return 'üò≥';
    case 'DRAMATIC': return 'üé≠';
    case 'WISE': return 'üßò';
    case 'PLAYFUL': return 'üéâ';
  }
}

export function getPersonalityName(personality: PlantPersonality, lang: string = 'ru'): string {
  const names: Record<PlantPersonality, Record<string, string>> = {
    FRIENDLY: { ru: '–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π', en: 'Friendly' },
    SHY: { ru: '–ó–∞—Å—Ç–µ–Ω—á–∏–≤—ã–π', en: 'Shy' },
    DRAMATIC: { ru: '–î—Ä–∞–º–∞—Ç–∏—á–Ω—ã–π', en: 'Dramatic' },
    WISE: { ru: '–ú—É–¥—Ä—ã–π', en: 'Wise' },
    PLAYFUL: { ru: '–ò–≥—Ä–∏–≤—ã–π', en: 'Playful' },
  };

  return names[personality][lang] || names[personality]['en'];
}
